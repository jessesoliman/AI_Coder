This was generated by ChatGPT by plugging in the requirements and asking it to design a database schema that follows the product requirements

Based on your requirements, we need to design a database schema that covers the functionalities for the **employer**, **candidate**, and **quiz system**. The entities must support creating and managing user accounts, creating quizzes with variable questions and response types, handling the quiz links, tracking time limits, and reporting results.

### Key Entities:
1. **Employer** - Handles employer accounts and profile details.
2. **Candidate** - Handles candidate details, linked to quizzes through unique links.
3. **Quiz** - Represents each quiz created by an employer.
4. **QuizLink** - Stores the unique key links associated with candidates for a specific quiz.
5. **Question** - Stores each question of a quiz.
6. **AnswerOption** - Stores the possible answer options for questions that are multiple-choice or checkbox type.
7. **QuizResponse** - Records a candidate’s responses to questions.
8. **QuizResult** - Stores quiz completion data and scores for ranking purposes.

### ER Diagram Outline
- **Employer** → **Quiz** (one-to-many)
- **Quiz** → **Question** (one-to-many)
- **Question** → **AnswerOption** (one-to-many, only for non-free-form questions)
- **QuizLink** → **Candidate** (one-to-one through key links)
- **QuizLink** → **QuizResponse** (one-to-many)
- **QuizResponse** → **Question** (many-to-one)
- **QuizLink** → **QuizResult** (one-to-one)

### Database Schema

#### 1. **Employer** Table
- `EmployerID` (Primary Key)
- `FirstName`
- `LastName`
- `Email` (Unique)
- `PasswordHash`
- `ProfileInfo`
- `CreatedAt`

#### 2. **Quiz** Table
- `QuizID` (Primary Key)
- `Title`
- `Description`
- `CreatedBy` (Foreign Key referencing `EmployerID` from **Employer** table)
- `TimeLimit` (Duration in minutes)
- `CreatedAt`

#### 3. **Question** Table
- `QuestionID` (Primary Key)
- `QuizID` (Foreign Key referencing `QuizID` from **Quiz** table)
- `QuestionText`
- `QuestionType` (e.g., ‘True/False’, ‘Multiple Choice’, ‘Checkbox’, ‘Free-form’)

#### 4. **AnswerOption** Table
- `OptionID` (Primary Key)
- `QuestionID` (Foreign Key referencing `QuestionID` from **Question** table)
- `OptionText`

#### 5. **Candidate** Table
- `CandidateID` (Primary Key)
- `FirstName`
- `LastName`
- `Email`
- `ProfileInfo`

#### 6. **QuizLink** Table
- `QuizLinkID` (Primary Key)
- `UniqueKey` (Unique)
- `QuizID` (Foreign Key referencing `QuizID` from **Quiz** table)
- `CandidateID` (Foreign Key referencing `CandidateID` from **Candidate** table)
- `LinkCreatedAt`
- `LinkExpiresAt`
- `IsLinkUsed` (Boolean)

#### 7. **QuizResponse** Table
- `ResponseID` (Primary Key)
- `QuizLinkID` (Foreign Key referencing `QuizLinkID` from **QuizLink** table)
- `QuestionID` (Foreign Key referencing `QuestionID` from **Question** table)
- `ResponseText`
- `SubmittedAt`

#### 8. **QuizResult** Table
- `ResultID` (Primary Key)
- `QuizLinkID` (Foreign Key referencing `QuizLinkID` from **QuizLink** table)
- `TotalScore`
- `TimeTaken` (in minutes)
- `CompletedAt`

### SQL Schema Code

```sql
CREATE TABLE Employer (
    EmployerID INT PRIMARY KEY AUTO_INCREMENT,
    FirstName VARCHAR(50),
    LastName VARCHAR(50),
    Email VARCHAR(100) UNIQUE,
    PasswordHash VARCHAR(255),
    ProfileInfo TEXT,
    CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Candidate (
    CandidateID INT PRIMARY KEY AUTO_INCREMENT,
    FirstName VARCHAR(50),
    LastName VARCHAR(50),
    Email VARCHAR(100),
    ProfileInfo TEXT
);

CREATE TABLE Quiz (
    QuizID INT PRIMARY KEY AUTO_INCREMENT,
    Title VARCHAR(100),
    Description TEXT,
    CreatedBy INT,
    TimeLimit INT,
    CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (CreatedBy) REFERENCES Employer(EmployerID)
);

CREATE TABLE Question (
    QuestionID INT PRIMARY KEY AUTO_INCREMENT,
    QuizID INT,
    QuestionText TEXT,
    QuestionType ENUM('True/False', 'Multiple Choice', 'Checkbox', 'Free-form'),
    FOREIGN KEY (QuizID) REFERENCES Quiz(QuizID)
);

CREATE TABLE AnswerOption (
    OptionID INT PRIMARY KEY AUTO_INCREMENT,
    QuestionID INT,
    OptionText TEXT,
    FOREIGN KEY (QuestionID) REFERENCES Question(QuestionID)
);

CREATE TABLE QuizLink (
    QuizLinkID INT PRIMARY KEY AUTO_INCREMENT,
    UniqueKey VARCHAR(255) UNIQUE,
    QuizID INT,
    CandidateID INT,
    LinkCreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    LinkExpiresAt TIMESTAMP,
    IsLinkUsed BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (QuizID) REFERENCES Quiz(QuizID),
    FOREIGN KEY (CandidateID) REFERENCES Candidate(CandidateID)
);

CREATE TABLE QuizResponse (
    ResponseID INT PRIMARY KEY AUTO_INCREMENT,
    QuizLinkID INT,
    QuestionID INT,
    ResponseText TEXT,
    SubmittedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (QuizLinkID) REFERENCES QuizLink(QuizLinkID),
    FOREIGN KEY (QuestionID) REFERENCES Question(QuestionID)
);

CREATE TABLE QuizResult (
    ResultID INT PRIMARY KEY AUTO_INCREMENT,
    QuizLinkID INT,
    TotalScore DECIMAL(5, 2),
    TimeTaken INT,
    CompletedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (QuizLinkID) REFERENCES QuizLink(QuizLinkID)
);
```

### Summary of Functionality
- Employers can manage their profiles and create quizzes with multiple question types.
- A unique link is generated and emailed to the candidate for each quiz attempt.
- Candidates can start a timed quiz using the key link.
- Quiz results are recorded and ranked based on scores.
- Employers receive an email notification after a candidate completes a quiz.


Here's the visual representation of the database schema to reflect all the tables and their relationships:

### Database Schema Diagram

```
+------------------------+
|       Employer         |
+------------------------+
| EmployerID (PK)        |
| FirstName              |
| LastName               |
| Email (Unique)         |
| PasswordHash           |
| ProfileInfo            |
| CreatedAt              |
+------------------------+

            1 |                                      
            | | Creates multiple                  
            | | (one-to-many)                  
            | v 
+------------------------+
|         Quiz           |
+------------------------+
| QuizID (PK)            |
| Title                  |
| Description            |
| CreatedBy (FK)         |
| TimeLimit              |
| CreatedAt              |
+------------------------+

            1 |                                      
            | | Includes multiple questions 
            | | (one-to-many)                    
            | v 
+------------------------+
|       Question         |
+------------------------+
| QuestionID (PK)        |
| QuizID (FK)            |
| QuestionText           |
| QuestionType           |
+------------------------+

            1 |                                      
            | | Has multiple options     
            | | (for non-freeform)              
            | v 
+------------------------+
|     AnswerOption       |
+------------------------+
| OptionID (PK)          |
| QuestionID (FK)        |
| OptionText             |
+------------------------+

            1 |                                      
            | | Linked to a candidate    
            | | (one-to-one)              
            | v 
+------------------------+
|      QuizLink          |
+------------------------+
| QuizLinkID (PK)        |
| UniqueKey (Unique)     |
| QuizID (FK)            |
| CandidateID (FK)       |
| LinkCreatedAt          |
| LinkExpiresAt          |
| IsLinkUsed             |
+------------------------+

+------------------------+
|      Candidate         |
+------------------------+
| CandidateID (PK)       |
| FirstName              |
| LastName               |
| Email                  |
| ProfileInfo            |
+------------------------+

            1 |                                      
            | | Contains multiple responses    
            | | (one-to-many)              
            | v 
+------------------------+
|     QuizResponse       |
+------------------------+
| ResponseID (PK)        |
| QuizLinkID (FK)        |
| QuestionID (FK)        |
| ResponseText           |
| SubmittedAt            |
+------------------------+

            1 |                                      
            | | Has one result    
            | | (one-to-one)              
            | v 
+------------------------+
|      QuizResult        |
+------------------------+
| ResultID (PK)          |
| QuizLinkID (FK)        |
| TotalScore             |
| TimeTaken              |
| CompletedAt            |
+------------------------+
```

### Explanation
1. **Employer** can create multiple **Quizzes**.
2. Each **Quiz** can have multiple **Questions**.
3. **Questions** can have multiple **AnswerOptions** if they are multiple-choice, checkbox, or true/false.
4. Each **QuizLink** contains a unique key and references both a **Quiz** and a **Candidate**.
5. **Candidates** are associated with **QuizLinks** to ensure secure quiz attempts.
6. **QuizResponse** records the responses for each **Question** by linking to the **QuizLink** and **Question**.
7. **QuizResult** stores the total score, time taken, and completion timestamp for each **QuizLink**.

### Legend
- **PK** = Primary Key
- **FK** = Foreign Key

This diagram visually represents the database structure, relationships, and how each table connects. It ensures all requirements for managing employers, candidates, quizzes, and responses are met. If you need any modifications, let me know!